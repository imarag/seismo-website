import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.B2tizaEh.js";import{I as j}from"./index.DK8rA4Xx.js";import{M as v,L as y,B}from"./Button.COBhiDMO.js";import{S as M}from"./Spinner.D8BFhGps.js";function O({className:e="",size:t="medium",...r}){const o="textarea textarea-bordered rounded-md",s={"extra-small":"textarea-xs",small:"textarea-sm",medium:"textarea-md",large:"textarea-lg"},l=`${o} ${s[t]||s.medium} ${e}`;return a.jsx("textarea",{className:l,...r})}class g{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const I=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:I()},w=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},D=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=w(e);i.publicKey=r.publicKey,i.blockHeadless=r.blockHeadless,i.storageProvider=r.storageProvider,i.blockList=r.blockList,i.limitRate=r.limitRate,i.origin=r.origin||t},k=async(e,t,r={})=>{const o=await fetch(i.origin+e,{method:"POST",headers:r,body:t}),s=await o.text(),l=new g(o.status,s);if(o.ok)return l;throw l},E=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},P=e=>e.webdriver||!e.languages||e.languages.length===0,S=()=>new g(451,"Unavailable For Headless Browser"),A=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},C=e=>!e.list?.length||!e.watchVariable,z=(e,t)=>e instanceof FormData?e.get(t):e[t],L=(e,t)=>{if(C(e))return!1;A(e.list,e.watchVariable);const r=z(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},T=()=>new g(403,"Forbidden"),J=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},U=async(e,t,r)=>{const o=Number(await r.get(e)||0);return t-Date.now()+o},N=async(e,t,r)=>{if(!t.throttle||!r)return!1;J(t.throttle,t.id);const o=t.id||e;return await U(o,t.throttle,r)>0?!0:(await r.set(o,Date.now().toString()),!1)},F=()=>new g(429,"Too Many Requests"),W=async(e,t,r,o)=>{const s=w(o),l=s.publicKey||i.publicKey,m=s.blockHeadless||i.blockHeadless,n=s.storageProvider||i.storageProvider,u={...i.blockList,...s.blockList},d={...i.limitRate,...s.limitRate};return m&&P(navigator)?Promise.reject(S()):(E(l,e,t),$(r),r&&L(u,r)?Promise.reject(T()):await N(location.pathname,d,n)?Promise.reject(F()):k("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},Y=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Q=e=>typeof e=="string"?document.querySelector(e):e,Z=async(e,t,r,o)=>{const s=w(o),l=s.publicKey||i.publicKey,m=s.blockHeadless||i.blockHeadless,n=i.storageProvider||s.storageProvider,u={...i.blockList,...s.blockList},d={...i.limitRate,...s.limitRate};if(m&&P(navigator))return Promise.reject(S());const f=Q(r);E(l,e,t),Y(f);const c=new FormData(f);return L(u,c)?Promise.reject(T()):await N(location.pathname,d,n)?Promise.reject(F()):(c.append("lib_version","4.4.1"),c.append("service_id",e),c.append("template_id",t),c.append("user_id",l),k("/api/v1.0/email/send-form",c))},G={init:D,send:W,sendForm:Z,EmailJSResponseStatus:g};function ne(){const e=h.useRef(),[t,r]=h.useState(!1),[o,s]=h.useState([]),[l,m]=h.useState(null),[n,u]=h.useState({nameError:null,emailError:null,messageError:null});function d(f){f.preventDefault(),r(!0);const c=new FormData(e.current),_=c.get("user_email"),R=c.get("user_name"),H=c.get("message");let p=null,b=null,x=null;const K=/^[a-zA-Z- ]{3,80}$/,V=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,q=/^[\s\S]{5,500}$/;if(K.test(R)||(x="Please enter your full name (3–80 characters). Only letters, spaces, and hyphens are allowed!"),V.test(_)||(p="The email address you entered is invalid. Please check for typos (e.g. missing @ or domain)!"),q.test(H)||(b="Your message should be between 5 and 500 characters!"),p||b||x){u({emailError:p,nameError:x,messageError:b}),r(!1);return}u({emailError:null,nameError:null,messageError:null}),G.sendForm("service_ak5azqh","template_e9aalni",e.current,{publicKey:"ux8hQOzLCp6f8Utvu"}).then(()=>{r(!1),m("You have successfully sent the message. Thank you for your feedback !!"),setTimeout(()=>m(null),5e3),s([]),e.current.reset()},re=>{r(!1),m(null),s(["We couldn’t send your message at the moment. Please try again shortly or contact us through another method!"]),setTimeout(()=>s([]),5e3)})}return a.jsxs(a.Fragment,{children:[o.length!==0&&a.jsx(v,{type:"error",text:o,setError:s,setSuccess:m}),l&&a.jsx(v,{type:"success",text:l,setError:s,setSuccess:m}),a.jsx("form",{method:"post",onSubmit:d,ref:e,children:a.jsxs("div",{className:"flex flex-col item-center gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(y,{htmlFor:"user_name",className:"w-full mx-auto",children:"Name"}),a.jsx(j,{id:"user_name",name:"user_name",className:"w-full mx-auto",required:!0}),n.nameError&&a.jsx("p",{className:"text-error my-2 text-sm",children:n.nameError})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(y,{htmlFor:"user_email",className:"w-full mx-auto",children:"Email Address"}),a.jsx(j,{id:"user_email",name:"user_email",className:"w-full mx-auto",required:!0}),n.emailError&&a.jsx("p",{className:"text-error my-2 text-sm",children:n.emailError})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(y,{htmlFor:"message",className:"w-full mx-auto",children:"Feedback"}),a.jsx(O,{id:"message",name:"message",className:"w-full mx-auto",required:!0}),n.messageError&&a.jsx("p",{className:"text-error my-2 text-sm",children:n.messageError})]}),a.jsx("div",{className:"my-4 flex flex-col items-stretch",children:a.jsxs(B,{type:"submit",disabled:t,children:[t?"Submitting...":"Submit",t&&a.jsx(M,{})]})})]})})]})}export{ne as default};
