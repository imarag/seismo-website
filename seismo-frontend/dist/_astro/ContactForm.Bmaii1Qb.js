import{j as i}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.B2tizaEh.js";import{I as B}from"./index.BVcgrbIe.js";import{M as w,h as M,L as I,B as O}from"./static.DO4rtNlp.js";import{S as q}from"./Spinner.D8BFhGps.js";function z({className:e,size:t="md",...r}){return i.jsx("textarea",{className:`textarea textarea-${t} textarea-bordered rounded-md ${e}`,...r})}class p{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const D=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:D()},x=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},A=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=x(e);a.publicKey=r.publicKey,a.blockHeadless=r.blockHeadless,a.storageProvider=r.storageProvider,a.blockList=r.blockList,a.limitRate=r.limitRate,a.origin=r.origin||t},v=async(e,t,r={})=>{const o=await fetch(a.origin+e,{method:"POST",headers:r,body:t}),s=await o.text(),c=new p(o.status,s);if(o.ok)return c;throw c},k=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},j=e=>e.webdriver||!e.languages||e.languages.length===0,E=()=>new p(451,"Unavailable For Headless Browser"),C=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},J=e=>!e.list?.length||!e.watchVariable,U=(e,t)=>e instanceof FormData?e.get(t):e[t],P=(e,t)=>{if(J(e))return!1;C(e.list,e.watchVariable);const r=U(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},S=()=>new p(403,"Forbidden"),Q=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},W=async(e,t,r)=>{const o=Number(await r.get(e)||0);return t-Date.now()+o},L=async(e,t,r)=>{if(!t.throttle||!r)return!1;Q(t.throttle,t.id);const o=t.id||e;return await W(o,t.throttle,r)>0?!0:(await r.set(o,Date.now().toString()),!1)},T=()=>new p(429,"Too Many Requests"),Y=async(e,t,r,o)=>{const s=x(o),c=s.publicKey||a.publicKey,m=s.blockHeadless||a.blockHeadless,u=s.storageProvider||a.storageProvider,d={...a.blockList,...s.blockList},f={...a.limitRate,...s.limitRate};return m&&j(navigator)?Promise.reject(E()):(k(c,e,t),$(r),r&&P(d,r)?Promise.reject(S()):await L(location.pathname,f,u)?Promise.reject(T()):v("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:c,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},G=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},X=e=>typeof e=="string"?document.querySelector(e):e,Z=async(e,t,r,o)=>{const s=x(o),c=s.publicKey||a.publicKey,m=s.blockHeadless||a.blockHeadless,u=a.storageProvider||s.storageProvider,d={...a.blockList,...s.blockList},f={...a.limitRate,...s.limitRate};if(m&&j(navigator))return Promise.reject(E());const n=X(r);k(c,e,t),G(n);const l=new FormData(n);return P(d,l)?Promise.reject(S()):await L(location.pathname,f,u)?Promise.reject(T()):(l.append("lib_version","4.4.1"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",c),v("/api/v1.0/email/send-form",l))},ee={init:A,send:Y,sendForm:Z,EmailJSResponseStatus:p};function ce(){const e=h.useRef(),[t,r]=h.useState(!1),[o,s]=h.useState(null),[c,m]=h.useState(null),[u,d]=h.useState({nameError:null,emailError:null,messageError:null});function f(n){n.preventDefault(),r(!0);const l=new FormData(e.current),R=l.get("user_email"),F=l.get("user_name"),_=l.get("message");let b=null,g=null,y=null;const H=/^[a-zA-z- ]{3,20}$/,N=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,K=/^[a-zA-z0-9-_ ]{10,500}$/;if(H.test(F)||(y="Name must be 3-20 characters long and contain only letters and hyphens."),N.test(R)||(b="Please enter a valid email address."),K.test(_)||(g="Message must be 10-500 characters long and can only contain letters, numbers, hyphens, and underscores."),b||g||y){d({emailError:b,nameError:y,messageError:g}),r(!1);return}d({emailError:null,nameError:null,messageError:null}),ee.sendForm("service_ak5azqh","template_e9aalni",e.current,{publicKey:"ux8hQOzLCp6f8Utvu"}).then(()=>{r(!1),m("You have successfully sent the message. Thank you!"),setTimeout(()=>m(null),5e3),s([]),e.current.reset()},V=>{r(!1),m(null),s(V.text),setTimeout(()=>s([]),5e3)})}return i.jsxs(i.Fragment,{children:[o&&i.jsx(w,{type:"error",text:o,setError:s,setSuccess:m}),c&&i.jsx(w,{type:"success",text:c,setError:s,setSuccess:m}),i.jsx("form",{method:"post",onSubmit:f,ref:e,children:i.jsxs("div",{className:"flex flex-col item-center gap-4",children:[M.map(n=>{const l=n.id=="user_name"?u.nameError:n.id=="user_email"?u.emailError:u.messageError;return i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(I,{label:n.label,id:n.id,className:"w-full mx-auto"}),n.type==="textarea"?i.jsx(z,{...n,className:"w-full mx-auto"}):i.jsx(B,{...n,className:"w-full mx-auto"}),l&&i.jsx("p",{className:"text-error my-2 text-sm",children:l})]},n.id)}),i.jsx("div",{className:"my-4 flex flex-col items-stretch",children:i.jsxs(O,{type:"submit",disabled:t,children:["Submit",t&&i.jsx(q,{})]})})]})})]})}export{ce as default};
